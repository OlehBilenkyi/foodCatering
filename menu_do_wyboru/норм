<?php
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
ini_set('display_errors', '0');
ini_set('log_errors', '1');
ini_set('error_log', $_SERVER['DOCUMENT_ROOT'] . '/logs/error_log.log');
error_reporting(E_ALL);

// –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
header("Cache-Control: no-cache, no-store, must-revalidate");
header("Pragma: no-cache");
header("Expires: 0");

// –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Å—Å–∏—é, –µ—Å–ª–∏ –æ–Ω–∞ –µ—â—ë –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞
if (session_status() === PHP_SESSION_NONE) {
    session_start();
    error_log("–°–µ—Å—Å–∏—è –∑–∞–ø—É—â–µ–Ω–∞. ID —Å–µ—Å—Å–∏–∏: " . session_id());
    // –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID ‚Äì –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å —Å–µ—Å—Å–∏—é –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
    session_regenerate_id(true);
    error_log("Session ID –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω.");
}

// –ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
include($_SERVER['DOCUMENT_ROOT'] . '/config/db.php');

// –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑—á–∏–∫ Composer –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Dotenv
require_once $_SERVER['DOCUMENT_ROOT'] . '/vendor/autoload.php';
use Dotenv\Dotenv;
$dotenv = Dotenv::createImmutable($_SERVER['DOCUMENT_ROOT']);
$dotenv->load();

// –ü–æ–ª—É—á–∞–µ–º Stripe Publishable Key –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
$stripePublishableKey = $_ENV['STRIPE_PUBLISHABLE_KEY'] ?? '';
if (!$stripePublishableKey) {
    error_log("Stripe Publishable Key –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.");
}

// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º CSRF-—Ç–æ–∫–µ–Ω, –µ—Å–ª–∏ –µ–≥–æ –µ—â—ë –Ω–µ—Ç –≤ —Å–µ—Å—Å–∏–∏
if (!isset($_SESSION['csrf_token'])) {
    $_SESSION['csrf_token'] = bin2hex(random_bytes(32));
    error_log("–ù–æ–≤—ã–π CSRF-—Ç–æ–∫–µ–Ω —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω: " . $_SESSION['csrf_token']);
} else {
    error_log("–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π CSRF-—Ç–æ–∫–µ–Ω: " . $_SESSION['csrf_token']);
}
$csrf_token = $_SESSION['csrf_token'];

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Å—Å–∏–∏
error_log("–¢–µ–∫—É—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–µ—Å—Å–∏–∏: " . print_r($_SESSION, true));

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
if (!$pdo) {
    error_log("[ERROR] –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.");
    exit('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.');
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–µ–Ω—é –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
function getMenuItemsByCategory(PDO $pdo, string $category): array {
    try {
        $query = "SELECT menu_options_id, category, dish_name, dish_image, dish_title, dish_description, dish_ingredients, dish_allergens, dish_energy, dish_fat, dish_carbohydrates, dish_protein, dish_salt, dish_net_mass 
                  FROM menu_options 
                  WHERE category = :category";
        $stmt = $pdo->prepare($query);
        $stmt->bindParam(':category', $category, PDO::PARAM_STR);
        $stmt->execute();
        return $stmt->fetchAll(PDO::FETCH_ASSOC);
    } catch (PDOException $e) {
        error_log("[ERROR] –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ getMenuItemsByCategory: " . $e->getMessage());
        return [];
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä–≤—ã—Ö N —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–µ–Ω—é
function getFirstFourMenuItems(array $menuItems, int $limit = 4): array {
    return array_slice($menuItems, 0, $limit);
}

// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
try {
    $menuItemsSniadanie = getFirstFourMenuItems(getMenuItemsByCategory($pdo, '≈öniadanie'));
    $menuItemsObiad    = getFirstFourMenuItems(getMenuItemsByCategory($pdo, 'Obiad'));
    $menuItemsKolacja  = getFirstFourMenuItems(getMenuItemsByCategory($pdo, 'Kolacja'));
} catch (Exception $e) {
    error_log("[ERROR] –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π: " . $e->getMessage());
    exit('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π.');
}

// –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω
$categories = ['Sniadanie', 'Obiad', 'Kolacja', 'Przekaska'];

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
function getAllMenuPrices(PDO $pdo, array $categories): array {
    try {
        $placeholders = implode(',', array_fill(0, count($categories), '?'));
        $query = "SELECT * FROM menu_prices WHERE category IN ($placeholders)";
        $stmt = $pdo->prepare($query);
        $stmt->execute($categories);
        return $stmt->fetchAll(PDO::FETCH_ASSOC);
    } catch (PDOException $e) {
        error_log("[ERROR] –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ getAllMenuPrices: " . $e->getMessage());
        return [];
    }
}

// –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ —Ü–µ–Ω–∞—Ö
try {
    $menuData = getAllMenuPrices($pdo, $categories);
    $groupedData = [];
    foreach ($menuData as $item) {
        $groupedData[$item['category']][] = $item;
    }
} catch (Exception $e) {
    error_log("[ERROR] –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ü–µ–Ω: " . $e->getMessage());
    $groupedData = [];
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ POST-–∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    try {
        // –ü–æ–ª—É—á–∞–µ–º —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞ (JSON)
        $json = file_get_contents('php://input');
        $data = json_decode($json, true);

        if (!$data) {
            error_log("[ERROR] –ù–µ —É–¥–∞–ª–æ—Å—å –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å JSON –∏–∑ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞.");
            echo json_encode([
                'status' => 'error',
                'message' => '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö.'
            ]);
            exit();
        }

        // –õ–æ–≥–∏—Ä—É–µ–º CSRF-—Ç–æ–∫–µ–Ω
        error_log("–ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –æ—Ç–≤–µ—Ç–∞ CSRF-—Ç–æ–∫–µ–Ω –≤ —Å–µ—Å—Å–∏–∏: " . $_SESSION['csrf_token']);
        error_log("–ü–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ CSRF-—Ç–æ–∫–µ–Ω: " . ($data['csrf_token'] ?? 'null'));

        // CSRF-–ø—Ä–æ–≤–µ—Ä–∫–∞: –∏—Å–ø–æ–ª—å–∑—É–µ–º hash_equals –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
        if (empty($data['csrf_token']) || !hash_equals($csrf_token, $data['csrf_token'])) {
            error_log('[WARNING] CSRF —Ç–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç.');
            echo json_encode([
                'status' => 'error',
                'message' => '–ù–µ–≤–µ—Ä–Ω—ã–π CSRF —Ç–æ–∫–µ–Ω. –û–ø–µ—Ä–∞—Ü–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞.'
            ]);
            exit();
        }
        error_log("POST –¥–∞–Ω–Ω—ã–µ: " . print_r($data, true));

        // –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (–µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî –º–∞—Å—Å–∏–≤, –±–µ—Ä—ë–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç)
        $requiredFields = ['email', 'total_price'];
        foreach ($requiredFields as $field) {
            $value = $data[$field] ?? '';
            if (is_array($value)) {
                $value = trim(reset($value));
            } else {
                $value = trim($value);
            }
            if (empty($value)) {
                throw new Exception("–ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ: $field");
            }
        }

        $email = filter_var(trim($data['email']), FILTER_VALIDATE_EMAIL);
        if (!$email) {
            throw new Exception("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email: " . $data['email']);
        }

        $totalPrice = floatval($data['total_price']);
        if ($totalPrice <= 0) {
            throw new Exception("–ù–µ–≤–µ—Ä–Ω–∞—è —Å—É–º–º–∞ –æ–ø–ª–∞—Ç—ã: $totalPrice");
        }

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞ –≤ —Å–µ—Å—Å–∏—é
        $_SESSION['order'] = [
            'email'       => $email,
            'total_price' => $totalPrice,
            'details'     => $data['details'] ?? []
        ];
        error_log("–î–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã: " . print_r($_SESSION['order'], true));

        echo json_encode(['status' => 'success', 'message' => '–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω.']);
        exit();
    } catch (Exception $e) {
        error_log("[ERROR] –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ POST-–∑–∞–ø—Ä–æ—Å–∞: " . $e->getMessage());
        echo json_encode(['status' => 'error', 'message' => $e->getMessage()]);
        exit();
    }
}

// –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ POST, –≤—ã–≤–æ–¥–∏–º HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ñ–æ—Ä–º–æ–π
?>





<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Stripe.js –¥–ª—è –æ–ø–ª–∞—Ç—ã -->
<script src="https://js.stripe.com/v3/" nonce="<?= htmlspecialchars($csrf_token, ENT_QUOTES, 'UTF-8') ?>"></script>

<?php
$pageTitle = "Food Case Catering";
$metaDescription = "Sprawd≈∫ nasze ceny na smaczne i zdrowe posi≈Çki!";
$metaKeywords = "restauracja, ceny, jedzenie, obiady, kolacja";
$metaAuthor = "Twoja Restauracja";

include($_SERVER['DOCUMENT_ROOT'] . '/includes/head.php');
include($_SERVER['DOCUMENT_ROOT'] . '/includes/header.php');

// –í–∫–ª—é—á–∞–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
ini_set('log_errors', 1);
ini_set('error_log', $_SERVER['DOCUMENT_ROOT'] . '/logs/error_log.log');
error_reporting(E_ALL);
?>


<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="<?= htmlspecialchars($csrf_token, ENT_QUOTES, 'UTF-8') ?>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<title>Catering - Zdrowe posi≈Çki i dostawa na ka≈ºdƒÖ okazjƒô | FoodCase Catering | Krak√≥w, Polska</title>
<meta name="description" content="FOODCASE - najlepszy catering dietetyczny w Krakowie. Oferujemy zdrowe ca≈Çodzienne posi≈Çki z dostawƒÖ do domu: ≈õniadania, obiady, przekƒÖski, kolacje, posi≈Çki niskokaloryczne, wega≈Ñskie, wegetaria≈Ñskie, sportowe i ketogeniczne. Sprawd≈∫ nasze menu i zam√≥w ju≈º teraz catering dietetyczny w Krakowie. FoodCase Catering - najlepsze zdrowe posi≈Çki na imprezy, spotkania, dostawy do dom√≥w w Krakowie i ca≈Çej Polsce. Oferujemy szeroki wyb√≥r cateringu dietetycznego, lunch box√≥w, jedzenia na eventy, imprezy rodzinne, wesela, konferencje i firmowe wydarzenia. Zam√≥w zdrowe i smaczne posi≈Çki ju≈º dzi≈õ! Catering Ca≈Çodzienny w Krakowie z dostawƒÖ na ca≈Çy dzie≈Ñ. ≈öniadania, obiady, przekƒÖski, kolacje, diety sportowe i niskokaloryczne dostarczane prosto do Twoich drzwi. Wybierz wygodƒô i jako≈õƒá ka≈ºdego dnia! Nasze menu jest starannie skomponowane, aby zapewniƒá Ci zdrowe, smaczne i zbilansowane posi≈Çki ka≈ºdego dnia.">
<meta name="keywords" content="catering dietetyczny Krak√≥w, zdrowe jedzenie Krak√≥w, dostawa posi≈Çk√≥w Krak√≥w, catering na wynos Krak√≥w, dieta pude≈Çkowa Krak√≥w, zdrowe obiady Krak√≥w, FOODCASE catering, dieta, posi≈Çki do domu Krak√≥w, ≈õniadania na wynos, catering ca≈Çodzienny, catering dietetyczny Polska, zdrowa dieta, jedzenie z dostawƒÖ, dieta pude≈Çkowa z dostawƒÖ, posi≈Çki do domu Krak√≥w, catering, catering dietetyczny, dostawa jedzenia, zdrowe posi≈Çki, Krak√≥w catering, Polska catering, catering firmowy, catering na eventy, catering na imprezy, dostawa posi≈Çk√≥w Krak√≥w, lunch box Krak√≥w, posi≈Çki dietetyczne Krak√≥w, catering weselny, catering konferencyjny, jedzenie na zam√≥wienie, zdrowa ≈ºywno≈õƒá, dostawa dietetycznych posi≈Çk√≥w, catering na spotkania, jedzenie z dostawƒÖ, fit catering, catering bezglutenowy, catering wega≈Ñski, catering wegetaria≈Ñski, posi≈Çki na wynos, catering niskokaloryczny, catering sportowy, diety sportowe, posi≈Çki wysokobia≈Çkowe, catering ketogeniczny, dieta ketogeniczna, diety odchudzajƒÖce, posi≈Çki na przyjƒôcia, catering eventowy, catering biznesowy, dieta catering, fit jedzenie, posi≈Çki bez laktozy, catering na wynos, dostawa zdrowego jedzenia, catering na ka≈ºdƒÖ okazjƒô, dostawa cateringu Krak√≥w, najlepsze jedzenie na wynos, catering dla firm Krak√≥w, catering weselny Krak√≥w, catering na imprezy rodzinne, catering na urodziny, dostawa jedzenia na eventy, zam√≥wienie cateringu, catering dietetyczny na zam√≥wienie, zdrowe jedzenie z dostawƒÖ, catering okoliczno≈õciowy, catering dla rodzin, catering na dom√≥wki, dostawa obiad√≥w, catering imprezowy, jedzenie z dostawƒÖ na miejsce, jedzenie na wynos w Krakowie, catering dla sportowc√≥w, fit catering Krak√≥w, zdrowe posi≈Çki na zam√≥wienie, catering na konferencje Krak√≥w, catering na spotkania firmowe, catering na ka≈ºdƒÖ okazjƒô Krak√≥w, zdrowe menu Krak√≥w, catering na wesela, catering z dostawƒÖ na miejsce, zam√≥w catering na imprezƒô, catering weselny w Polsce, zdrowe jedzenie na wynos, catering na specjalne wydarzenia, jedzenie na przyjƒôcia Krak√≥w, catering na specjalne zam√≥wienia, catering z dostawƒÖ, catering na chrzciny, catering dla dzieci, catering na komuniƒô, catering na rodzinne spotkania, jedzenie z dowozem Krak√≥w, dostawa jedzenia na przyjƒôcia, catering na ka≈ºdƒÖ okazjƒô, catering dietetyczny w Polsce, catering z dostawƒÖ do domu, catering niskokaloryczny, zdrowe obiady z dostawƒÖ, posi≈Çki dla sportowc√≥w, posi≈Çki bia≈Çkowe, diety na masƒô, zdrowe od≈ºywianie Krak√≥w">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://foodcasecatering.net/index2/" />
<meta name="language" content="pl">
<meta name="author" content="FoodCase Catering">
<meta name="geo.region" content="PL-MA">
<meta name="geo.placename" content="Krak√≥w, Polska">
<meta name="geo.position" content="50.0646501;19.9449799">
<meta name="ICBM" content="50.0646501, 19.9449799">
<meta property="og:title" content="Catering - Zdrowe posi≈Çki i dostawa na ka≈ºdƒÖ okazjƒô | FoodCase Catering | Krak√≥w, Polska">
<meta property="og:description" content="Najlepszy catering w Krakowie! Oferujemy zdrowe i smaczne posi≈Çki na imprezy, spotkania firmowe i rodzinne. W naszej ofercie znajdziesz r√≥wnie≈º posi≈Çki sportowe, niskokaloryczne, ketogeniczne i inne diety. Zobacz nasze oferty i zam√≥w ju≈º teraz!">
<meta property="og:type" content="website">
<meta property="og:url" content="https://foodcasecatering.net/index2/">
<meta property="og:image" content="https://foodcasecatering.net/uploads_img/logo.png">
<meta property="og:locale" content="pl_PL">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="FoodCase Catering - Catering Dietetyczny w Krakowie i Polsce">
<meta name="twitter:description" content="Zdrowe jedzenie z dostawƒÖ w Krakowie. Oferujemy diety sportowe, ketogeniczne i posi≈Çki niskokaloryczne. Z≈Ç√≥≈º zam√≥wienie na nasze najlepsze dania ju≈º dzi≈õ. Catering dla imprez, spotka≈Ñ i specjalnych okazji!">
<meta name="twitter:image" content="https://foodcasecatering.net/uploads_img/logo.png">
<meta name="business:contact_data:locality" content="Krak√≥w">
<meta name="business:contact_data:region" content="Ma≈Çopolskie">
<meta name="business:contact_data:country_name" content="Polska">
<meta name="business:contact_data:postal_code" content="31-000">
<meta name="business:contact_data:email" content="info@foodcasecatering.net">
<meta name="business:contact_data:phone_number" content="+48 123 456 789">
<meta name="gmb:business_name" content="FoodCase Catering">
<meta name="gmb:description" content="Catering i zdrowe posi≈Çki w Krakowie. Z≈Ç√≥≈º zam√≥wienie na najlepsze jedzenie na wynos i dostawƒô do domu lub biura. W naszej ofercie znajdziesz r√≥wnie≈º diety sportowe, ketogeniczne i niskokaloryczne.">
<meta name="gmb:address" content="ul. Warszawska 123, 31-000 Krak√≥w, Polska">
<meta name="gmb:phone_number" content="+48 123 456 789">
<meta name="subject" content="Catering w Krakowie - Najlepsze Zdrowe Posi≈Çki, Diety Sportowe i Ketogeniczne">
<meta name="coverage" content="Krak√≥w, Polska, Ma≈Çopolska">
<meta name="distribution" content="Global">
<meta name="rating" content="General">
<meta name="target" content="all">
<meta name="HandheldFriendly" content="true">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<script src="https://cdn.jsdelivr.net/npm/air-datepicker/locale/air-datepicker.pl.js"></script>
<script src="https://cdn.jsdelivr.net/npm/air-datepicker@latest/air-datepicker.min.js" defer></script>
<style>
.page-grid__tab {
    width: 100%;
    display: none;
    position: relative;
   
    
}

.page-grid__tab.active {
    display: block;
}

.pay-widget {
    display: flex;
    flex-direction: column;
    width: 100%;
    position: relative;
    border-bottom: 1px solid #fff;
}

.pay-widget__main {
    display: flex;
    flex-direction: column;
}

.pay-widget__row {
    padding: 20px 0;
    position: relative;
    border-bottom: 1px solid #e0e0e0;
}

.pay-widget__row:first-child {
    padding-top: 0;
}

.pay-widget__title {
    text-align: center;
    margin-bottom: 20px;
    font-size: 35px;
    font-weight: 700;
    line-height: 1;
}
.calendar-container {
    display: flex;
    justify-content: space-evenly;
    padding-bottom: 30px;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}
.select-date{
    font-weight: 600;
    font-size: 26px;
}

.pay-widget__heading {
    text-align: center;
    font-size: 25px;
    font-weight: 600;
    margin-bottom: 20px;
}
.pay-wInfo, .select-weight {
    font-size: 25px;
}
.pay-wInfo__text{
    padding-top: 10px;
    padding-bottom: 20px;
    font-size: 25px;
    
}
                         /*/////////////////////////////////////// */
.pay-widget__grid {
    margin-top: 20px;
    display: flex;
    gap: 15px;
    flex-direction: column;
    overflow: inherit;
}



.pay-full-card__photo {
    margin: -15px 0 -15px -20px;
    display: none;
}

.pay-full-card__data {
    flex: 1 1 auto;
}

.pay-full-card__title {
    font-size: 22px;
    font-weight: 600;
}

.pay-full-card__item {
    display: flex;
    align-items: flex-start;
    gap: 5px;
    font-size: 14px;
    line-height: 16px;
    padding: 14px 0;
    border-bottom: 1px solid #fff;
}

.pay-full-card__item:last-child {
    padding-bottom: 0;
    border-bottom: 0;
}

.price {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 16px;
}

.price__old {
    font-weight: 500;
    color: red;
    text-decoration: line-through;
}
                            /*/////////////////////////////////////// */ 


.menu-item {
    display: flex;
    flex-direction: row;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.13);
    overflow: hidden;
}
.menu-card__heading h6 {
        font-size: 14px;
    }
    .menu-card__photo {
    flex-shrink: 0;
    width: 35%;
}

 .pay-full-card__data,.menu-card__row{
    /*width: 100%;*/
    overflow-wrap: break-word;
    word-break: break-word;
    white-space: normal;
}


.pay-full-card__data {
    padding: 10px;
    white-space: normal; /* –†–∞–∑—Ä–µ—à–∞–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫ */
    word-wrap: break-word; /* –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –¥–ª–∏–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ */
    overflow: hidden; /* –û–±—Ä–µ–∑–∞–µ—Ç —Ç–µ–∫—Å—Ç */
    text-overflow: ellipsis; /* –î–æ–±–∞–≤–ª—è–µ—Ç "..." –¥–ª—è –¥–ª–∏–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ */
    display: -webkit-box;
    -webkit-line-clamp: 3; /* –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ */
    -webkit-box-orient: vertical;
}
.menu-card__row {
    display: flex; /* –í–∫–ª—é—á–∞–µ–º flex –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è */
    flex-wrap: wrap; /* –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É */
    gap: 5px; /* –ó–∞–¥–∞–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
}





.menu-item:last-child {
    margin-right: 0; /* –ï—Å–ª–∏ —Ä–µ—à–∏—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å flex */
}
.waga-button_sniad,
.waga-button_obiad,
.waga-button_przekaska,
.waga-button_kolacja,
.add-food {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 12px;
    border-radius: 10px;
    font-size: 14px;
    font-weight: 500;
    line-height: 20px;
    color: #fff;
    background: #0056d3;
    transition: background-color 0.5s, transform 0.3s; /* –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã */
    cursor: pointer; /* –ò–∑–º–µ–Ω—è–µ—Ç –∫—É—Ä—Å–æ—Ä –Ω–∞ —É–∫–∞–∑–∞—Ç–µ–ª—å */
}
.waga-button_sniad:hover,
.waga-button_obiad:hover,
.waga-button_przekaska:hover,
.waga-button_kolacja:hover,
.add-food:hover {
    background-color: #0040a8; /* –ù–æ–≤—ã–π —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    transform: scale(1.05); /* –õ–µ–≥–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ */
}


.waga_sniad,
.waga_obiad,
.waga_kolacja {
    display: flex;
    gap: 10px;
    flex-direction: column;
}

.zl_sniad-zl,
.zl_obiad-zl,
.zl_przekaska-zl,
.zl_kolacja-zl {
    align-items: center;
    padding-bottom: 10px;
    display: flex;
    justify-content: space-evenly;
    gap: 10px;
    flex-direction: column;
}
.zl_przekaska{
    text-align: center;
}
.btn.pay-widget__more.hidden {
    display: none;
}
#blocks-container .page-grid__tab {
    margin-bottom: 20px;
}
/* –≠—Ñ—Ñ–µ–∫—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É */
.menu-item {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.menu-item:hover {
    transform: scale(1.05); /* –õ–µ–≥–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    box-shadow: 0 0 15px rgba(0, 123, 255, 0.6); /* –¢–µ–Ω—å –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
}

/* –ù–µ–æ–Ω–æ–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ */
.menu-item.selected {
    border: 2px solid #00d1ff; /* –ì–æ–ª—É–±–∞—è –Ω–µ–æ–Ω–æ–≤–∞—è —Ä–∞–º–∫–∞ */
    box-shadow: 0 0 20px #00d1ff; /* –ù–µ–æ–Ω–æ–≤–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ */
    transform: scale(1.05); /* –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–µ–º –≤—ã–±–æ—Ä */
    transition: all 0.3s ease;
}

/* –ë–∞–∑–æ–≤—ã–π —Å—Ç–∏–ª—å –∫–Ω–æ–ø–∫–∏ */
.pay-item__btn {
    border: 1px solid #ccc;
    padding: 10px 15px;
    margin: 5px;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
}

/* –°—Ç–∏–ª—å –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ */
.pay-item__btn.active {
    border: 2px solid #00aaff;
    background-color: #e6f7ff;
    color: #005580;
    font-weight: bold;
    box-shadow: 0 0 10px rgba(0, 170, 255, 0.5);
}

/* –•–æ–≤–µ—Ä —ç—Ñ—Ñ–µ–∫—Ç */
.pay-item__btn:hover {
    background-color: #f5f5f5;
    border-color: #aaa;
}


.pay-total__send.disabled {
    background-color: #ddd;
    color: #aaa;
    pointer-events: none;
}
.pay-item__btn.active {
    border: 2px solid #007BFF;
    background-color: #E6F7FF;
    color: #0056b3;
    font-weight: bold;
    box-shadow: 0 0 8px rgba(0, 123, 255, 0.6);
}

.pay-total__send.disabled {
    background-color: #ccc;
    color: #666;
    cursor: not-allowed;
}
.pay-total__send {
    background-color: #007BFF;
    color: white;
    padding: 10px 20px;
    font-size: 16px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.pay-total__send:hover {
    background-color: #0056b3;
}

.pay-total__send.disabled {
    background-color: #ccc; /* –°–µ—Ä—ã–π —Ñ–æ–Ω –¥–ª—è –æ—Ç–∫–ª—é—á—ë–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–∏ */
    color: #666;
    cursor: not-allowed; /* –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π –∫—É—Ä—Å–æ—Ä */
}


@media (min-width: 1201px) {
    
}
@media (min-width: 993px) {
    .pay-widget__grid {
        margin-top: 50px;
        gap: 25px;
    }
    
    
}
@media (min-width: 767px) {
    
    
    .pay-widget__grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
    }
    
    .menu-card__row {
        font-size: 14px;
    }
    
}

 @media (min-width: 560px) {
     .calendar-container {
        flex-direction: row;
        align-items: flex-start;
        gap: 0;
    }
    .waga_sniad, .waga_obiad, .waga_kolacja, .zl_sniad-zl, .zl_obiad-zl, .zl_kolacja-zl  {
        flex-direction: row;
    }
 }


@media (min-width: 365px) {
    .menu-card__heading h6 {
        font-size: 18px;
    }
}



@media (min-width: 120px) {
    .menu-card__row {
        font-size: 14px;
    }
}

/* –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è –≤ —Å–µ–∫—Ü–∏—è—Ö, –Ω–µ –ø–æ–º–µ—á–µ–Ω–Ω—ã—Ö –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ */
.pay-widget__row:not(.additional-category) .remove-category {
  display: none;
}

/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è –≤ —Å–µ–∫—Ü–∏—è—Ö —Å –∫–ª–∞—Å—Å–æ–º additional-category */
.pay-widget__row.additional-category .remove-category {
  display: block;
}



#accept-label {
    pointer-events: auto;
    cursor: pointer;
}
/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –∑–∞–º–µ—Ç–∫–∏ */
.pay-widget__heading-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞–º–µ—Ç–∫–∏ */
.pay-widget__note {
  font-weight: bold;  /* –°–¥–µ–ª–∞—Ç—å —Ç–µ–∫—Å—Ç –∂–∏—Ä–Ω—ã–º */
  color: #333;        /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –ª—É—á—à–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏ */
  font-size: 14px;    /* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
}
/* –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–∏–ª—å –±–∞–Ω–Ω–µ—Ä–∞ */
.cookie-banner {
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 90%;
  max-width: 800px;
  background-color: #f7f7f7; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —á–∏—Å—Ç–æ–º—É —Å—Ç–∏–ª—é */
  border-radius: 15px 15px 0 0;
  border: 1px solid #e0e0e0; /* –õ–µ–≥–∫–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —á–µ—Ç–∫–æ—Å—Ç–∏ */
  box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.1);
  padding: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  z-index: 1000;
  animation: slide-up 0.5s ease-in-out;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –±–∞–Ω–Ω–µ—Ä–∞ */
@keyframes slide-up {
  from {
    transform: translate(-50%, 100%);
  }
  to {
    transform: translateX(-50%);
  }
}

/* –ö–æ–Ω—Ç–µ–Ω—Ç –≤–Ω—É—Ç—Ä–∏ –±–∞–Ω–Ω–µ—Ä–∞ */
.cookie-content p {
  color: #333; /* –¢—ë–º–Ω—ã–π –æ—Ç—Ç–µ–Ω–æ–∫ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
  font-family: 'Poppins', Arial, sans-serif;
  font-size: 16px;
  margin-bottom: 15px;
  line-height: 1.6;
}

/* –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª–∏—Ç–∏–∫—É */
.cookie-policy-link {
  color: #007bff; /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç–∏–ª—é —Å–∞–π—Ç–∞ */
  font-weight: bold;
  text-decoration: none;
}

.cookie-policy-link:hover {
  text-decoration: underline;
  color: #0056b3; /* –¢–µ–º–Ω—ã–π –æ—Ç—Ç–µ–Ω–æ–∫ —Å–∏–Ω–µ–≥–æ –¥–ª—è —Ö–æ–≤–µ—Ä–∞ */
}

/* –ö–Ω–æ–ø–∫–∏ */
.cookie-buttons {
  display: flex;
  gap: 15px;
  justify-content: center;
}

.cookie-accept-button,
.cookie-decline-button {
  padding: 10px 20px;
  font-size: 16px;
  font-family: 'Poppins', Arial, sans-serif;
  font-weight: bold;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease-in-out;
}

.cookie-accept-button {
  background-color: #007bff; /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç –≤ —Å—Ç–∏–ª–µ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ */
  color: white;
}

.cookie-accept-button:hover {
  background-color: #0056b3; /* –ë–æ–ª–µ–µ —Ç–µ–º–Ω—ã–π —Å–∏–Ω–∏–π –¥–ª—è —Ö–æ–≤–µ—Ä–∞ */
}

.cookie-decline-button {
  background-color: #6c757d; /* –°–µ—Ä—ã–π –¥–ª—è –∫–Ω–æ–ø–∫–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è */
  color: white;
}

.cookie-decline-button:hover {
  background-color: #5a6268; /* –¢–µ–º–Ω–µ–µ –¥–ª—è —Ö–æ–≤–µ—Ä–∞ */
}


    /* –ö–ª–∞—Å—Å –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –∑–∞–≥—Ä—É–∑–∫–∏ */
#pay-button.loading {
    pointer-events: none;
    opacity: 0.8;
    color: transparent; /* –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç, —á—Ç–æ–±—ã –±—ã–ª –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ —Å–ø–∏–Ω–Ω–µ—Ä */
    background-color: rgba(0, 0, 0, 0.1); /* –î–æ–±–∞–≤–ª—è–µ–º –ª–µ–≥–∫–∏–π –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
    position: relative;
}

#pay-button.loading::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 24px;
    height: 24px;
    margin: -12px 0 0 -12px;
    border: 3px solid #ffffff; /* –ë–µ–ª—ã–π —Ü–≤–µ—Ç –¥–ª—è —Å–ø–∏–Ω–Ω–µ—Ä–∞ */
    border-top-color: #0056D2; /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç –¥–ª—è –≤–µ—Ä—Ö–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü—ã, –ø–æ–¥ —Ü–≤–µ—Ç –∫–Ω–æ–ø–∫–∏ */
    border-radius: 50%;
    animation: spin 0.7s linear infinite;
    z-index: 10;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>
</head>
<body>
<main class="page-main">    
    <div class="container">
        <h1 class="page-title">Z≈Ç√≥≈º zam√≥wienie</h1>

      <div class="steps-line">
        <div class="steps-line__item active">
          <div class="steps-line__num">1</div>
          Wybierz kaloryczno≈õƒá
        </div>
        <div class="steps-line__item">
          <div class="steps-line__num">2</div>
          Podaj dane dostawy
        </div>
        <div class="steps-line__item">
          <div class="steps-line__num">3</div>
          Podsumowania zam√≥wienia
        </div>
        <div class="steps-line__item">
          <div class="steps-line__num">4</div>
          P≈Çatno≈õƒá
        </div>
      </div>
      <div class="calc-modal pay__modal modal" id="calc">
        <div class="calc-modal__inner">
          <div class="calc-modal__close" data-modal-close>
            <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 23.5L23.5 1M1 1L23.5 23.5" stroke="#232324" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>

          <svg class="icon" width="120" height="139" viewBox="0 0 120 139" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="60" cy="69" r="57.5" stroke="#FF0000" stroke-width="5"/>
            <path d="M64.5625 27.3636L63.7457 87.4773H54.2713L53.4545 27.3636H64.5625ZM59.0085 111.653C56.9938 111.653 55.265 110.932 53.8221 109.489C52.3791 108.046 51.6577 106.317 51.6577 104.303C51.6577 102.288 52.3791 100.559 53.8221 99.1161C55.265 97.6732 56.9938 96.9517 59.0085 96.9517C61.0232 96.9517 62.752 97.6732 64.195 99.1161C65.6379 100.559 66.3594 102.288 66.3594 104.303C66.3594 105.637 66.0191 106.862 65.3384 107.978C64.685 109.094 63.8002 109.993 62.6839 110.673C61.5949 111.327 60.3698 111.653 59.0085 111.653Z" fill="#FF1313"/>
          </svg>
          <div class="calc-modal__title">Wybierz datƒô dostawy dla wszystkich paczek</div>
        </div>
      </div>
     <form action="/payments/process_order_do_wyboru.php" method="POST" class="page-grid" id="order-form">
  <!-- –î–æ–±–∞–≤–ª—è–µ–º CSRF —Ç–æ–∫–µ–Ω –≤ –ø–µ—Ä–≤–æ–µ –ø–æ–ª–µ -->
  <input type="hidden" name="csrf_token" value="<?= htmlspecialchars($csrf_token, ENT_QUOTES, 'UTF-8') ?>">
                            <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è order_id -->
                            <input type="hidden" id="hidden-order-id" name="hidden-order-id">
        <div class="page-grid__main">
          <div id="template-block" class="page-grid__tab active product-tab">

            <div class="pay-widget-container">
            <!-- –°—é–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥—É–±–ª–∏—Ä—É–µ–º—ã–µ –±–ª–æ–∫–∏ -->
            </div>
            <div hidden class="btn pay-widget__more hidden">Dodaj nastƒôpnƒÖ datƒô</div>
            <div  class="btn pay-widget__moreV2 ">Dodaj nastƒôpnƒÖ datƒô</div>
            <!--Dane kontaktowe-->
          </div>
          <div class="page-grid__tab">
            <div class="btn pay-total__prev"> 
              <svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M5.70679 0.292787C5.89426 0.480314 5.99957 0.734622 5.99957 0.999786C5.99957 1.26495 5.89426 1.51926 5.70679 1.70679L2.41379 4.99979L5.70679 8.29279C5.88894 8.48139 5.98974 8.73399 5.98746 8.99619C5.98518 9.25838 5.88001 9.5092 5.6946 9.6946C5.5092 9.88001 5.25838 9.98518 4.99619 9.98746C4.73399 9.98974 4.48139 9.88894 4.29279 9.70679L0.292787 5.70679C0.105316 5.51926 0 5.26495 0 4.99979C0 4.73462 0.105316 4.48031 0.292787 4.29279L4.29279 0.292787C4.48031 0.105316 4.73462 0 4.99979 0C5.26495 0 5.51926 0.105316 5.70679 0.292787V0.292787Z" fill="black"/>
              </svg>
              Zmie≈Ñ kolejno≈õƒá
            </div>
            <div class="delivery-widget">
              <div class="delivery-widget__row">
                <div class="delivery-widget__title">Dane kontaktowe:</div>

                <div class="delivery-widget__grid">
                      <div class="delivery-widget__field large">
                        <div class="delivery-widget__label">E-mail</div>
                        <input type="email" name="email" id="email" required class="delivery-widget__input email-input" placeholder="E-mail">
                      </div>

                  <div class="delivery-widget__field">
                    <div class="delivery-widget__label">Numer telefonu</div>
                    <input type="text" name="phone" id="phone" required class="delivery-widget__input phone-input" placeholder="Numer telefonu"> 

                  </div>

                  <div class="delivery-widget__field">
                    <div class="delivery-widget__label">Pe≈Çne imiƒô i nazwisko</div>
                            <input type="text" name="fullname"  id="fullname" required class="delivery-widget__input fullname-input" placeholder="Pe≈Çne imiƒô i nazwisko">
                          </div>
                        </div>
                      </div>

              <div class="delivery-widget__row">
                <div class="delivery-widget__title">Dane dostawy:</div>

                <div class="delivery-widget__grid">
                  

                  <div class="delivery-widget__field">
                    <div class="delivery-widget__label">Ulica</div>
                    <input type="text" name="street" id="street" required class="delivery-widget__input street-input" placeholder="Ulica">   
                  </div>
                  

                  <div class="delivery-widget__field">
                    <div class="delivery-widget__label">Dom</div>
                    <input type="text" name="house_number" id="house_number" required class="delivery-widget__input house-number-input" placeholder="Dom">
                  </div>

                  <div class="delivery-widget__field">
                    <div class="delivery-widget__label">Klatka</div>
                    <input type="text" name="klatka" id="klatka" class="delivery-widget__input klatka-input" placeholder="Klatka">
                  </div>
                  <div class="delivery-widget__field">
                    <div class="delivery-widget__label">Piƒôtro</div>
                    <input type="text" name="floor" id="floor" required class="delivery-widget__input floor-input" placeholder="Piƒôtro">
                  </div>

                  <div class="delivery-widget__field">
                    <div class="delivery-widget__label">Mieszkanie</div>
                    <input type="text" name="apartment" id="apartment" required class="delivery-widget__input apartment-input" placeholder="Mieszkanie">
                  </div>
                  <div class="delivery-widget__field">
                    <div class="delivery-widget__label">Kod do klatki</div>
                    <input type="text" name="gate_code" id="gate_code" required class="delivery-widget__input gate-code-input" placeholder="Kod do klatki">
                  </div>

                  <div class="delivery-widget__field large">
                    <div class="delivery-widget__label">Uwagi</div>
                    <input type="text" name="notes"  id="notes" class="delivery-widget__input notes-input large" placeholder="Uwagi">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!--Informacje o zam√≥wieniu-->
          <div class="page-grid__tab">
            <div class="btn pay-total__prev"> 
              <svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M5.70679 0.292787C5.89426 0.480314 5.99957 0.734622 5.99957 0.999786C5.99957 1.26495 5.89426 1.51926 5.70679 1.70679L2.41379 4.99979L5.70679 8.29279C5.88894 8.48139 5.98974 8.73399 5.98746 8.99619C5.98518 9.25838 5.88001 9.5092 5.6946 9.6946C5.5092 9.88001 5.25838 9.98518 4.99619 9.98746C4.73399 9.98974 4.48139 9.88894 4.29279 9.70679L0.292787 5.70679C0.105316 5.51926 0 5.26495 0 4.99979C0 4.73462 0.105316 4.48031 0.292787 4.29279L4.29279 0.292787C4.48031 0.105316 4.73462 0 4.99979 0C5.26495 0 5.51926 0.105316 5.70679 0.292787V0.292787Z" fill="black"/>
              </svg>
              –ïdytowaƒá dane
            </div>
        
                            <div class="total-info">
                                <div class="total-info__row">
                                    <h3 class="total-info__heading">Informacje o zam√≥wieniu</h3>
                                    <div class="total-info__grid menu_do_wyboru" id="order-summary">
                                        <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ -->
                                    </div>
                                </div>
    <div class="total-info__row">
        <h3 class="total-info__heading">Dane dostawy</h3>
        <div class="total-info__data"></div>
    </div>
</div>
          </div>
        </div>
        <div class="page-grid__aside">
          <div class="pay-total">
            <div class="pay-total__item packgs">
              <b>Wybrane daty:</b>
              <span id="package-count"></span>
            </div>
            <div class="pay-total__item total">
              <b>Liczba dat:</b>
              <span id="total-without-discount"></span>
            </div>
            <div class="pay-total__item discount">
              <b>Rabat:</b>
              <span id="discount-amount" style="color: red;font-weight: bold;">0.00z≈Ç</span>
            </div>
            <div class="pay-total__item sum">
              <b>Razem do zap≈Çaty:</b>
              <span id="total-price" style="color: #006A23;font-weight: bold;">0.00z≈Ç</span>
            </div>
            <label for="accept" id="accept-label" class="accept-terms disabled">
  <input type="checkbox" id="accept" disabled="true">
  <span>
    Zapozna≈Çem siƒô z zasadami strony i <a href="/regulamin/" target="_blank">Regulamin</a>.
  </span>
</label>

            <div class="btn pay-total__send btn_waga active" disabled>Podaƒá adres dostawy</div>
            <div class="btn pay-total__send" disabled>Podsumowania zam√≥wienia</div>
            <button type="submit" id="pay-button" class="btn pay-total__send active">P≈Çatno≈õƒá</button>
          </div>
        </div>
      </form>

    </div>
  </main>

<div class="cookie-banner">
  <div class="cookie-content">
<p>Nasza strona korzysta z plik√≥w cookies w celu zapewnienia pomy≈õlnej realizacji zam√≥wie≈Ñ.<span>üç™</span><a href="/privacy_policy/" class="cookie-policy-link">Polityka prywatno≈õci</a><span>üç™</span> </p>
    <div class="cookie-buttons">
      <span>üç™</span>
      <button class="cookie-accept-button">Zgadzaƒá siƒô</button>
      <button class="cookie-decline-button">Odmawiaƒá</button>
      <span>üç™</span>
    </div>
  </div>
  <div class="cookie-icons">
    
  </div>
</div>

<?php include $_SERVER['DOCUMENT_ROOT'] . '/includes/footer.php'; ?>

<script>
const currentVersion = 'v1.3.0'; // –ò–∑–º–µ–Ω–∏—Ç–µ –≤–µ—Ä—Å–∏—é –Ω–∞ –Ω–æ–≤—É—é –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∞ "Informacje o zam√≥wieniu"
const updateOrderUI = () => {
    const orderSummary = document.getElementById('order-summary');
    if (!orderSummary) {
        return;
    }

    const orderData = OrderManager.getOrderData();

    let summaryHTML = '';

    if (orderData.dates && Object.keys(orderData.dates).length > 0) {
        Object.entries(orderData.dates).forEach(([date, categories]) => {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –±–ª—é–¥–æ –¥–ª—è —ç—Ç–æ–π –¥–∞—Ç—ã
            const hasData = categories.sniad.length > 0 || categories.obiad.length > 0 || categories.kolacja.length > 0;

            if (hasData) {
                summaryHTML += `
                    <div class="order-summary-block">
                        <p><strong>Data: ${date}</strong></p>
                        ${OrderManager.renderCleanedCategories('≈öniadanie', categories.sniad)}
                        ${OrderManager.renderCleanedCategories('Obiad', categories.obiad)}
                        ${OrderManager.renderCleanedCategories('Kolacja', categories.kolacja)}
                        <p><strong>Razem za dzie≈Ñ: ${OrderManager.calculateDayTotal(categories)} z≈Ç</strong></p>
                    </div>
                    <hr>
                `;
            }
        });

        if (summaryHTML === '') {
            summaryHTML = '<p>Brak danych o zam√≥wieniu.</p>';
        }
    } else {
        summaryHTML = '<p>Brak danych o zam√≥wieniu.</p>';
    }

    orderSummary.innerHTML = summaryHTML;
};

// –ú–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞—Ç
let selectedDates = [];

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –¥–∞—Ç–∞–º–∏
const updateSelectedDatesUI = () => {
  const packageCountElement = document.getElementById('package-count');
  const totalDatesElement = document.getElementById('total-without-discount');
  if (packageCountElement && totalDatesElement) {
    packageCountElement.textContent = selectedDates.join(', ');
    totalDatesElement.textContent = selectedDates.length;
  }
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–∞—Ç—ã –≤ –º–∞—Å—Å–∏–≤ selectedDates –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
const addSelectedDate = (date, index) => {
  const formattedDate = date.toLocaleDateString('pl-PL', { 
    day: '2-digit', 
    month: '2-digit', 
    year: 'numeric' 
  });
  selectedDates[index] = formattedDate;
  const orderData = OrderManager.getOrderData();
  if (!orderData.dates[formattedDate]) {
    orderData.dates[formattedDate] = { sniad: [], obiad: [], kolacja: [] };
  }
  sessionStorage.setItem('orderData', JSON.stringify(orderData));
  updateSelectedDatesUI();
};

function showErrorMessage(message) {
  const errorDiv = document.getElementById('error-message');
  if (errorDiv) {
    errorDiv.textContent = message;
    errorDiv.style.display = 'block';
    setTimeout(() => { errorDiv.style.display = 'none'; }, 3000);
  } else {
    alert(message);
  }
}

document.addEventListener('click', function(e) {
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ–≥–æ –±–ª–æ–∫–∞ (–ø–∞–∫–µ—Ç–∞)
  const removePackageBtn = e.target.closest('.remove-package');
  if (removePackageBtn) {
    const packageBlock = removePackageBtn.closest('.pay-widget');
    if (packageBlock) {
      const dateInput = packageBlock.querySelector('input[name^="selected-date"]');
      if (dateInput) {
        const dateValue = dateInput.value;
        selectedDates = selectedDates.filter(d => d !== dateValue);
      }
      packageBlock.remove();
      OrderManager.saveOrderDataToStorage();
      updateSelectedDatesUI();
      return;
    }
  }

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Å–µ–∫—Ü–∏–∏)
  const removeCategoryBtn = e.target.closest('.remove-category');
  if (removeCategoryBtn) {
    const categoryBlock = removeCategoryBtn.closest('.additional-category');
    if (categoryBlock) {
      categoryBlock.remove();
      OrderManager.saveOrderDataToStorage();
      updateSelectedDatesUI();
    }
  }
});

// –ö–ª–∞—Å—Å OrderManager —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–º–∏ –∑–∞–∫–∞–∑–∞ –∏ –∏—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ sessionStorage
document.querySelectorAll('.pay-widget section[data-category]').forEach(section => {
  // –î–æ—Å—Ç—É–ø –∫ data-–∞—Ç—Ä–∏–±—É—Ç—É, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–∞–ª—å–Ω–µ–π—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
  const category = section.dataset.category;
});

// ‚úÖ –ö–ª–∞—Å—Å OrderManager —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–∫–∞–∑–æ–º
class OrderManager {
  // ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç UI
  static saveOrderDataToStorage() {
    const orderData = { dates: {}, totalPrice: 0 };

    document.querySelectorAll('.pay-widget').forEach(widget => {
      const dateInput = widget.querySelector('[name^="selected-date"]');
      const date = dateInput ? dateInput.value.trim() : '';
      if (!date) {
        return;
      }
      if (!orderData.dates[date]) {
        orderData.dates[date] = { sniad: [], obiad: [], kolacja: [] };
      }

      ['sniad', 'obiad', 'kolacja'].forEach(category => {
        const newItems = this.getCleanedSectionData(widget, category);
        newItems.forEach(newItem => {
          const exists = orderData.dates[date][category].some(item =>
            item.value === newItem.value && item.weight === newItem.weight && item.price === newItem.price
          );
          if (!exists) {
            orderData.dates[date][category].push(newItem);
          }
        });
      });
    });

    orderData.totalPrice = this.calculateTotalPrice(orderData);

    sessionStorage.setItem('orderData', JSON.stringify(orderData));

    setTimeout(() => {
      this.updateTotalInfo();
      this.updateOrderSummary();
    }, 100);
  }

  // ‚úÖ –û—á–∏—â–∞–µ—Ç –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  static getCleanedSectionData(widget, category) {
    const data = this.getSectionData(widget, category)
      .filter(item => item.value.trim() !== '' && parseFloat(item.weight) > 0);

    const uniqueData = data.filter((item, index, self) =>
      index === self.findIndex(i =>
        i.value === item.value &&
        i.weight === item.weight &&
        i.price === item.price
      )
    );

    return uniqueData;
  }

  static getSectionData(container, category) {
    const dataArray = [];
    container.querySelectorAll('.pay-widget__row').forEach(row => {
      const valueField = row.querySelector(`input[id^="hidden-${category}"][name^="hidden-${category}-menu-item-pay-full-card"]`);
      if (!valueField) return;
      const weightField = row.querySelector(`input[id^="hidden-${category}-data-weight"]`);
      const priceField = row.querySelector(`input[id^="hidden-${category}-data-price"]`);
      const selectedOptionField = row.querySelector(`input[name^="selected_${category}_menu_options_id"]`);

      dataArray.push({
        value: valueField.value.trim() || 'Nie wybrano',
        weight: weightField ? weightField.value : '0',
        price: priceField ? parseFloat(priceField.value) : 0,
        menu_options_id: selectedOptionField ? selectedOptionField.value : ""
      });
    });
    return dataArray;
  }

  // ‚úÖ –í—ã—á–∏—Å–ª—è–µ—Ç –æ–±—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–∫–∞–∑–∞
  static calculateTotalPrice(orderData) {
    let totalPrice = 0;
    Object.values(orderData.dates).forEach(categories => {
      Object.values(categories).flat().forEach(data => {
        totalPrice += parseFloat(data.price) || 0;
      });
    });
    return totalPrice.toFixed(2);
  }

  // ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞ –∏–∑ sessionStorage
  static getOrderData() {
    return JSON.parse(sessionStorage.getItem('orderData')) || { dates: {} };
  }

  // ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç –±–ª–æ–∫ total-info
  static updateTotalInfo() {
    const totalInfoGrid = document.querySelector('.total-info__grid.menu_do_wyboru');
    if (!totalInfoGrid) return;

    const orderData = this.getOrderData();
    const selectedDates = Object.keys(orderData.dates).join(', ') || 'Nie wybrano';
    const overallTotal = this.calculateTotalPrice(orderData);

    totalInfoGrid.innerHTML = `
        <p><strong>Razem do zap≈Çaty:</strong> <span style="color: #006A23; font-weight: bold;">${overallTotal} z≈Ç</span></p>
        <p><strong>Wybrane daty:</strong> <span>${selectedDates}</span></p>
    `;

    const totalPriceElement = document.getElementById('total-price');
    if (totalPriceElement) {
      totalPriceElement.textContent = `${overallTotal} z≈Ç`;
    }
  }

  // ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ "Informacje o zam√≥wieniu"
  static updateOrderSummary() {
    const orderSummary = document.getElementById('order-summary');
    if (!orderSummary) return;

    const orderData = this.getOrderData();
    let summaryHTML = '';

    Object.entries(orderData.dates).forEach(([date, categories]) => {
      if (categories.sniad.length || categories.obiad.length || categories.kolacja.length) {
        summaryHTML += `
                    <div class="order-summary-block">
                        <p><strong>Data: ${date}</strong></p>
                        ${this.renderCleanedCategories('≈öniadanie', categories.sniad)}
                        ${this.renderCleanedCategories('Obiad', categories.obiad)}
                        ${this.renderCleanedCategories('Kolacja', categories.kolacja)}
                        <p><strong>Razem za dzie≈Ñ: ${this.calculateDayTotal(categories)} z≈Ç</strong></p>
                    </div>
                    <hr>
                `;
      }
    });

    orderSummary.innerHTML = summaryHTML || '<p>Brak danych o zam√≥wieniu.</p>';
  }

  // ‚úÖ –†–µ–Ω–¥–µ—Ä–∏—Ç –æ—á–∏—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –±–ª—é–¥–∞—Ö
  static renderCleanedCategories(title, dataArray) {
    if (!dataArray.length) return '';
    let categoryHTML = `<p><strong>${title}:</strong></p><ul>`;
    dataArray.forEach(data => {
      categoryHTML += `<li>${data.value} (${data.weight}g) - ${data.price.toFixed(2)} z≈Ç</li>`;
    });
    return categoryHTML + `</ul>`;
  }

  // ‚úÖ –í—ã—á–∏—Å–ª—è–µ—Ç —Å—É–º–º—É –∑–∞ –¥–µ–Ω—å
  static calculateDayTotal(categories) {
    return Object.values(categories).flat().reduce((sum, cat) => sum + (parseFloat(cat.price) || 0), 0).toFixed(2);
  }

  // ‚úÖ –û—á–∏—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞
  static resetOrderData() {
    sessionStorage.removeItem('orderData');
    this.updateTotalInfo();
    this.updateOrderSummary();
  }
}

// ‚úÖ –°–ª–µ–¥–∏–º –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
document.addEventListener('change', function (event) {
  if (event.target.matches('.pay-widget .air-datepicker input')) {
    OrderManager.saveOrderDataToStorage();
  }
});

// ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –º–µ—Ç–æ–¥–æ–≤
document.addEventListener('DOMContentLoaded', () => {
  OrderManager.updateTotalInfo();
  OrderManager.updateOrderSummary();
});

// –ö–ª–∞—Å—Å MenuCategory —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏–∫–æ–π –≤—ã–±–æ—Ä–∞ –±–ª—é–¥ –∏ –≤–µ—Å–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ–Ω—é
class MenuCategory {
  constructor(category, section) {
    this.category = category;
    this.section = section;
    this.buttons = section.querySelectorAll('.pay-item__btn');
    this.menuItems = section.querySelectorAll(`.menu-items_${category} .menu-item`);
    this.fieldWeight = section.querySelector(`input[id^="hidden-${category}-data-weight"]`);
    this.fieldPrice = section.querySelector(`input[id^="hidden-${category}-data-price"]`);
    this.hiddenDishField = section.querySelector(`input[id^="hidden-${category}"][name^="hidden-${category}-menu-item-pay-full-card"]`);

    if (!this.fieldWeight || !this.fieldPrice || !this.hiddenDishField) {
      return;
    }

    if (!this.buttons.length || !this.menuItems.length) {
      return;
    }

    this.init();
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∏ –∫–∞—Ä—Ç–æ—á–µ–∫ –º–µ–Ω—é
  init() {
    this.resetState();

    this.buttons.forEach(button => {
      button.addEventListener('click', () => {
        this.selectWeight(button);
        this.syncOrderManager();
        MenuManager.updateAcceptCheckboxState();
      });
    });

    this.menuItems.forEach(card => {
      card.addEventListener('click', () => {
        this.selectMenuCard(card);
        this.syncOrderManager();
        MenuManager.updateAcceptCheckboxState();
      });
    });
  }

  // –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –∏ –∫–∞—Ä—Ç–æ—á–µ–∫
  resetState() {
    this.buttons.forEach(btn => btn.classList.remove('active'));
    this.menuItems.forEach(card => {
      card.classList.remove('selected');
      card.classList.add('disabled');
    });

    this.fieldWeight.value = '0';
    this.fieldPrice.value = '0';
    this.hiddenDishField.value = '';
  }

  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä –≤–µ—Å–∞
  selectWeight(button) {
    this.buttons.forEach(btn => btn.classList.remove('active'));
    button.classList.add('active');

    this.fieldWeight.value = button.dataset.weight || '0';
    this.fieldPrice.value = button.dataset.price || '0';

    this.menuItems.forEach(card => card.classList.remove('disabled'));

    this.syncOrderManager();
  }

  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ –º–µ–Ω—é
  selectMenuCard(card) {
    if (card.classList.contains('disabled')) return;

    this.menuItems.forEach(c => c.classList.remove('selected'));
    card.classList.add('selected');

    const dishName = card.querySelector('.menu-card__heading h6')?.textContent || '';
    this.hiddenDishField.value = dishName;

    this.syncOrderManager();
  }

  // –û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∫–∞–∑–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ sessionStorage
  syncOrderManager() {
    OrderManager.updateTotalInfo();
    OrderManager.saveOrderDataToStorage();
    OrderManager.updateOrderSummary();
  }

  // –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –∑–∞–≤–µ—Ä—à–µ–Ω –ª–∏ –≤—ã–±–æ—Ä –¥–ª—è –¥–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  isComplete() {
    return (
      this.fieldWeight.value.trim() !== "0" &&
      this.fieldPrice.value.trim() !== "0" &&
      [...this.menuItems].some(card => card.classList.contains("selected"))
    );
  }
}

// ‚úÖ –ö–ª–∞—Å—Å MenuManager —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–µ–∫—Ü–∏–π, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è
class MenuManager {
  static categories = [];

  // ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –º–µ–Ω—é
  static addCategory(category, section) {
    const menuCategory = new MenuCategory(category, section);
    if (menuCategory.fieldWeight && menuCategory.fieldPrice && menuCategory.hiddenDishField) {
      this.categories.push(menuCategory);
    }
  }

  // ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ–∫–±–æ–∫—Å–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —É—Å–ª–æ–≤–∏–π
  static updateAcceptCheckboxState() {
    const allSections = document.querySelectorAll('.pay-widget section[data-category]');
    let allComplete = true;

    allSections.forEach(section => {
      const category = section.dataset.category;
      const categoryManager = this.categories.find(
        cat => cat.category === category && cat.section === section
      );

      if (categoryManager) {
        const isComplete = categoryManager.isComplete();
        if (!isComplete) allComplete = false;
      } else {
        this.addCategory(category, section);
        allComplete = false;
      }
    });

    const acceptCheckbox = document.getElementById('accept');
    const acceptLabel = document.querySelector('.accept-terms');

    if (acceptCheckbox && acceptLabel) {
      if (allComplete) {
        acceptCheckbox.removeAttribute('disabled');
        acceptLabel.classList.remove('disabled');
      } else {
        acceptCheckbox.setAttribute('disabled', 'true');
        acceptLabel.classList.add('disabled');
      }
    }
  }

  // ‚úÖ –î—É–±–ª–∏—Ä—É–µ—Ç —Å–µ–∫—Ü–∏—é –º–µ–Ω—é
  static duplicateSection(originalSection) {
    const newSection = originalSection.cloneNode(true);
    const uniqueId = `${Date.now()}-${Math.random().toString(36).substring(2, 8)}`;

    newSection.querySelectorAll('[id]').forEach(el => {
      el.id = `${el.id}-${uniqueId}`;
    });
    newSection.querySelectorAll('[name]').forEach(el => {
      const currentName = el.getAttribute('name') || '';
      if (currentName.startsWith("selected-date")) {
        el.setAttribute('name', `selected-date-${uniqueId}`);
      } else {
        el.setAttribute('name', `${currentName}-${uniqueId}`);
      }
    });

    newSection.querySelectorAll('input[type="hidden"]').forEach(field => {
      field.value = '';
    });

    newSection.querySelectorAll('.pay-item__btn').forEach(button => button.classList.remove('active'));
    newSection.querySelectorAll('.menu-item').forEach(card => {
      card.classList.remove('selected');
      card.classList.add('disabled');
    });

    newSection.classList.add('additional-category');

    originalSection.insertAdjacentElement('afterend', newSection);

    const category = originalSection.dataset.category;
    if (!category) {
      return;
    }

    new MenuCategory(category, newSection);

    this.updateAcceptCheckboxState();
  }

  // ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –µ–¥—ã
  static initializeAddFoodButtons(section) {
    const addFoodButtons = section.querySelectorAll('.add-food [data-add-category]');
    addFoodButtons.forEach(button => {
      button.addEventListener('click', () => {
        const categorySection = section.closest(`section[data-category="${button.dataset.addCategory}"]`);
        if (categorySection) {
          this.duplicateSection(categorySection);
        }
      });
    });
  }

  // ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—å –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã
  static initializeCalendar(section) {
    const calendarElement = section.querySelector('.calendar-container #delivery-calendar');
    if (calendarElement && !calendarElement.dataset.initialized) {
      setupCalendar(calendarElement, section);
      calendarElement.dataset.initialized = "true";
    }
  }
}

// –ö–ª–∞—Å—Å DuplicateManager —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –±–ª–æ–∫–æ–≤ –º–µ–Ω—é
class DuplicateManager {
  constructor(containerSelector, templateSelector) {
    this.container = document.querySelector(containerSelector);
    this.template = document.querySelector(templateSelector);
    this.blockCounter = 0;

    if (!this.container || !this.template) {
      return;
    }

    this.init();
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  init() {
    this.addInitialBlock();
    document.querySelector('.pay-widget__moreV2').addEventListener('click', () => this.addNewBlock());

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MutationObserver –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ DOM
    this.observer = new MutationObserver(mutations => {
      mutations.forEach(mutation => {
        if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
          mutation.addedNodes.forEach(node => {
            if (node.classList && node.classList.contains('pay-widget')) {
              this.initializeComponents(node);
            }
          });
        }
      });
    });

    this.observer.observe(this.container, { childList: true, subtree: true });

    // –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –µ–¥—ã
    document.querySelector('.pay-widget-container').addEventListener('click', event => {
      if (event.target.matches('.add-food [data-add-category]')) {
        const category = event.target.dataset.addCategory;
        const section = event.target.closest(`section[data-category="${category}"]`);
        if (section) {
          MenuManager.duplicateSection(section);
        }
      }
    });
  }

  // –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–π –±–ª–æ–∫ –∏–∑ —à–∞–±–ª–æ–Ω–∞
  addInitialBlock() {
    const initialClone = this.template.content.cloneNode(true);
    this.container.appendChild(initialClone);
    this.initializeComponents(initialClone);
  }

  // –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π –±–ª–æ–∫
  addNewBlock() {
    const clone = this.template.content.cloneNode(true);
    this.blockCounter++;
    this.updateAttributes(clone, this.blockCounter);
    this.container.appendChild(clone);
    this.initializeComponents(clone);
    OrderManager.saveOrderDataToStorage();
  }

  // –û–±–Ω–æ–≤–ª—è–µ—Ç –∞—Ç—Ä–∏–±—É—Ç—ã ID –∏ name –¥–ª—è –Ω–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤
  updateAttributes(clone, counter) {
    clone.querySelectorAll('[id]').forEach(el => {
      el.id = `${el.id}-${counter}`;
    });

    clone.querySelectorAll('[name]').forEach(el => {
      const currentName = el.getAttribute('name') || '';
      if (currentName.startsWith("selected-date")) {
        el.setAttribute('name', `selected-date-${counter}`);
      } else {
        el.setAttribute('name', `${currentName}-${counter}`);
      }
    });
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –Ω–æ–≤–æ–º –±–ª–æ–∫–µ
  initializeComponents(block) {
    block.querySelectorAll('section[data-category]').forEach(section => {
      const category = section.dataset.category;
      if (category) {
        new MenuCategory(category, section);
      }
    });

    const calendar = block.querySelector('.calendar-container div[id^="delivery-calendar"]');
    if (calendar && !calendar.dataset.initialized) {
      setupCalendar(calendar, block);
      calendar.dataset.initialized = 'true';
    }
    MenuManager.updateAcceptCheckboxState();
  }
}

// –§—É–Ω–∫—Ü–∏—è setupCalendar –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—å –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã –¥–æ—Å—Ç–∞–≤–∫–∏
const setupCalendar = (calendarContainer, section = null) => {
  if (!calendarContainer) {
    return;
  }

  const now = new Date();
  const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
  const cutoffTime = 21; // 21:00 ‚Äì –ø–æ—Ä–æ–≥–æ–≤–æ–µ –≤—Ä–µ–º—è

  const calculateMinDate = () => {
    const minDate = new Date(today);
    if (now.getHours() >= cutoffTime) {
      minDate.setDate(today.getDate() + 2);
    } else {
      minDate.setDate(today.getDate() + 1);
    }
    return minDate;
  };

  const disableDates = (date) => {
    if (date < calculateMinDate()) {
      return true;
    }
    if (date.getDay() === 6 || date.getDay() === 0) {
      return true;
    }
    return false;
  };

  new AirDatepicker(calendarContainer, {
    locale: {
      days: ['Niedziela', 'Poniedzia≈Çek', 'Wtorek', '≈öroda', 'Czwartek', 'PiƒÖtek', 'Sobota'],
      daysMin: ['Nd', 'Pn', 'Wt', '≈ör', 'Czw', 'Pt', 'So'],
      months: ['Stycze≈Ñ', 'Luty', 'Marzec', 'Kwiecie≈Ñ', 'Maj', 'Czerwiec', 'Lipiec', 'Sierpie≈Ñ', 'Wrzesie≈Ñ', 'Pa≈∫dziernik', 'Listopad', 'Grudzie≈Ñ'],
      monthsShort: ['Sty', 'Lut', 'Mar', 'Kwi', 'Maj', 'Cze', 'Lip', 'Sie', 'Wrz', 'Pa≈∫', 'Lis', 'Gru']
    },
    minDate: calculateMinDate(),
    isDisabled: disableDates,
    multipleDates: false,
    range: false,
    onSelect({ date }) {
      if (date) {
        const widgetBlock = calendarContainer.closest('.pay-widget');
        const dateInput = widgetBlock.querySelector('input[name^="selected-date"]');
        if (dateInput) {
          const formattedDate = date.toLocaleDateString('pl-PL', {
            day: '2-digit',
            month: '2-digit',
            year: 'numeric'
          });
          dateInput.value = formattedDate;
          const fullCardDateElem = widgetBlock.querySelector('.pay-full-card__dates');
          if (fullCardDateElem) {
            fullCardDateElem.textContent = formattedDate;
          }
          const allWidgets = Array.from(document.querySelectorAll('.pay-widget'));
          const widgetIndex = allWidgets.indexOf(widgetBlock);
          addSelectedDate(date, widgetIndex);
          OrderManager.saveOrderDataToStorage();
        }
      }
    }
  });
};

const init = () => {
  new DuplicateManager('.pay-widget-container', '#menu-widget-template');

  MenuManager.updateAcceptCheckboxState();
  OrderManager.updateTotalInfo();
  OrderManager.updateOrderSummary();

  const staticCalendar = document.querySelector('#delivery-calendar');
  if (staticCalendar) {
    setupCalendar(staticCalendar);
  }

  const acceptLabel = document.getElementById('accept-label');
  const acceptCheckbox = document.getElementById('accept');
  if (acceptLabel && acceptCheckbox) {
    acceptLabel.addEventListener('click', function(e) {
      if (acceptCheckbox.disabled) {
        e.preventDefault();
        showErrorMessage("Najpierw wybierz wszystkie dania na stronie");
      }
    });
  }
};

document.addEventListener('DOMContentLoaded', init);

document.querySelectorAll('.steps-line__item').forEach((step, index) => {
  step.addEventListener('click', () => {
    if (index === 2) {
      OrderManager.updateOrderSummary();
    }
  });
});

const observer = new MutationObserver(mutations => {
  mutations.forEach(mutation => {
    if (mutation.attributeName === "class") {
      const tab = mutation.target;
      if (tab.classList.contains("active")) {
        OrderManager.updateOrderSummary();
      }
    }
  });
});

document.querySelectorAll(".page-grid__tab").forEach(tab => {
  observer.observe(tab, { attributes: true });
});

document.addEventListener('click', (e) => {
  const card = e.target.closest('.menu-item.pay-full-card');
  if (!card) return;
  
  const section = card.closest('section[data-category]');
  if (!section) return;
  
  const hiddenInput = section.querySelector('input.selected-menu-options-id');
  if (!hiddenInput) return;
  
  section.querySelectorAll('.menu-item.pay-full-card').forEach(c => c.classList.remove('selected'));
  card.classList.add('selected');
  
  const menuOptionsId = card.getAttribute('data-menu-options-id') || "";
  hiddenInput.value = menuOptionsId;
});

</script>



<script>
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Stripe —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–ª—é—á–∞ –∏–∑ PHP
  const stripe = Stripe('<?= htmlspecialchars($stripePublishableKey, ENT_QUOTES, 'UTF-8') ?>');

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –∫–Ω–æ–ø–∫–∏ (—Å–ø–∏–Ω–µ—Ä)
  function toggleLoadingState(button, isLoading) {
    if (isLoading) {
      button.classList.add("loading");
      button.disabled = true;
    } else {
      button.classList.remove("loading");
      button.disabled = false;
    }
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–ª–æ–∫ —Å id="error-message")
  function showErrorMessage(message) {
    const errorDiv = document.getElementById('error-message');
    if (errorDiv) {
      errorDiv.textContent = message;
      errorDiv.style.display = 'block';
      setTimeout(() => {
        errorDiv.style.display = 'none';
      }, 3000);
    } else {
      alert(message);
    }
  }

  class App {
    constructor() {
      document.addEventListener('DOMContentLoaded', () => {
        // === –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞–Ω–Ω–µ—Ä–∞ –¥–ª—è –∫—É–∫–∏ ===
        const cookieBanner = document.querySelector('.cookie-banner');
        const acceptCookieButton = document.querySelector('.cookie-accept-button');
        const declineCookieButton = document.querySelector('.cookie-decline-button');

        if (acceptCookieButton) {
          acceptCookieButton.addEventListener('click', function () {
            // –°–∫—Ä—ã–≤–∞–µ–º –±–∞–Ω–Ω–µ—Ä –ø—Ä–∏ —Å–æ–≥–ª–∞—Å–∏–∏
            cookieBanner.style.display = 'none';
          });
        }
        if (declineCookieButton) {
          declineCookieButton.addEventListener('click', function () {
            // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ
            window.location.href = '/';
          });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ "P≈Çatno≈õƒá" –∏ –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç–æ—á–µ–∫
        this.initPayButton();
        this.initCardSelection();
      });
    }

    // –ü–æ–ª—É—á–∞–µ—Ç CSRF-—Ç–æ–∫–µ–Ω –∏–∑ –º–µ—Ç–∞—Ç–µ–≥–∞
    getCsrfToken = () => {
      const csrfMeta = document.querySelector('meta[name="csrf-token"]');
      return csrfMeta ? csrfMeta.getAttribute('content') : null;
    };

    // –û–±–Ω–æ–≤–ª—è–µ—Ç CSRF-—Ç–æ–∫–µ–Ω –≤ –º–µ—Ç–∞—Ç–µ–≥–µ
    updateCsrfToken = (newToken) => {
      const csrfMeta = document.querySelector('meta[name="csrf-token"]');
      if (csrfMeta) {
        csrfMeta.setAttribute('content', newToken);
      }
    };

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ "P≈Çatno≈õƒá"
    initPayButton = () => {
      const payButton = document.getElementById("pay-button");
      if (!payButton) {
        return;
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –º–µ—Ç–∫–µ "accept" ‚Äì –µ—Å–ª–∏ —á–µ–∫–±–æ–∫—Å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
      const acceptLabel = document.getElementById('accept-label');
      if (acceptLabel) {
        acceptLabel.addEventListener('click', function(e) {
          const acceptCheckbox = document.getElementById('accept');
          if (acceptCheckbox && acceptCheckbox.disabled) {
            e.preventDefault();
            showErrorMessage("Najpierw wybierz wszystkie dania na stronie");
          }
        });
      }

      payButton.addEventListener("click", (event) => {
        event.preventDefault();
        const acceptCheckbox = document.getElementById("accept");
        if (acceptCheckbox && !acceptCheckbox.checked) {
          alert("Musisz zaakceptowaƒá regulamin.");
          return;
        }
        // –í–∫–ª—é—á–∞–µ–º —Å–ø–∏–Ω–µ—Ä ‚Äì –∫–Ω–æ–ø–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π
        toggleLoadingState(payButton, true);

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞
        this.sendOrder()
          .finally(() => {
            // –í—ã–∫–ª—é—á–∞–µ–º —Å–ø–∏–Ω–µ—Ä –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ (–≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞ –∏–ª–∏ –æ—à–∏–±–∫–∏)
            toggleLoadingState(payButton, false);
          });
      });
    };

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    initCardSelection = () => {
      const categories = ['sniad', 'obiad', 'kolacja'];
      categories.forEach((category) => {
        const section = document.querySelector(`section.zl_${category}`);
        if (!section) return;
        // –ò—â–µ–º —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –≤–Ω—É—Ç—Ä–∏ —Å–µ–∫—Ü–∏–∏ –ø–æ –∫–ª–∞—Å—Å—É
        const hiddenField = section.querySelector('input.selected-menu-options-id');
        const cards = section.querySelectorAll('.menu-item.pay-full-card');
        if (!hiddenField) {
          return;
        }
        cards.forEach((card) => {
          card.addEventListener('click', () => {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ –¥–∞–Ω–Ω–æ–π —Å–µ–∫—Ü–∏–∏
            cards.forEach((c) => c.classList.remove('selected'));
            card.classList.add('selected');
            // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ menu_options_id –∏–∑ data-–∞—Ç—Ä–∏–±—É—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
            const menuOptionsId = card.getAttribute('data-menu-options-id') || "";
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–∫—Ä—ã—Ç–æ–º –ø–æ–ª–µ —ç—Ç–æ–π —Å–µ–∫—Ü–∏–∏
            hiddenField.value = menuOptionsId;
          });
        });
      });
    };

    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –∑–∞–∫–∞–∑–∞, –¥–æ–±–∞–≤–ª—è—è –ø–æ–ª–µ category –∏ menu_options_id
    mapOrderItems = (items = [], categoryKey, selectedMenuOption = null) => {
      const categoryMap = {
        sniad: '≈õniadanie',
        obiad: 'obiad',
        kolacja: 'kolacja'
      };
      return items.map(item => ({
        dish_name: item.value || item.dish_name || '',
        weight: item.weight,
        price: item.price,
        category: categoryMap[categoryKey] || categoryKey,
        menu_options_id: selectedMenuOption
      }));
    };

    // –°–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞ –∏–∑ —Ñ–æ—Ä–º—ã –∏ OrderManager
    getOrderDetails = () => {
      const csrfToken = this.getCsrfToken();
      if (!csrfToken) {
        alert("–û—à–∏–±–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: CSRF-—Ç–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω!");
        return null;
      }

      const totalPriceEl = document.getElementById("total-price");
      const totalPrice = totalPriceEl
        ? totalPriceEl.textContent.trim().replace("z≈Ç", "").replace(",", ".")
        : "0";

      const building = document.getElementById("klatka")?.value.trim() || "";

      let orderData = {};
      if (typeof OrderManager?.getOrderData === 'function') {
        orderData = OrderManager.getOrderData();
      }

      const selectedSniad = document.querySelector('section.zl_sniad input[name="selected_menu_options_id"]')?.value || "";
      const selectedObiad = document.querySelector('section.zl_obiad input[name="selected_menu_options_id"]')?.value || "";
      const selectedKolacja = document.querySelector('section.zl_kolacja input[name="selected_menu_options_id"]')?.value || "";

      let orderDays = [];
      if (Array.isArray(orderData.order_days) && orderData.order_days.length > 0) {
        orderDays = orderData.order_days;
      } else if (orderData.dates && typeof orderData.dates === 'object') {
        for (const date in orderData.dates) {
          if (orderData.dates.hasOwnProperty(date)) {
            const dayData = orderData.dates[date];
            let computedDayTotal = 0;
            let items = [];
            const categories = ['sniad', 'obiad', 'kolacja'];
            categories.forEach((cat) => {
              if (Array.isArray(dayData[cat])) {
                dayData[cat].forEach(item => {
                  computedDayTotal += parseFloat(item.price) || 0;
                });
                let selectedOption = "";
                if (cat === 'sniad') selectedOption = selectedSniad;
                else if (cat === 'obiad') selectedOption = selectedObiad;
                else if (cat === 'kolacja') selectedOption = selectedKolacja;

                items = items.concat(this.mapOrderItems(dayData[cat], cat, selectedOption));
              }
            });
            let formattedDate = date;
            if (date.includes('.')) {
              const parts = date.split('.');
              if (parts.length === 3) {
                formattedDate = `${parts[2]}-${parts[1]}-${parts[0]}`;
              }
            }
            orderDays.push({
              delivery_date: formattedDate,
              day_total_price: computedDayTotal.toFixed(2),
              items: items
            });
          }
        }
      }

      if (orderDays.length === 0) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –¥–∞—Ç—É –¥–æ—Å—Ç–∞–≤–∫–∏.");
        return null;
      }

      return {
        csrf_token: csrfToken,
        email: document.getElementById("email")?.value.trim() || "",
        phone: document.getElementById("phone")?.value.trim() || "",
        fullname: document.getElementById("fullname")?.value.trim() || "",
        street: document.getElementById("street")?.value.trim() || "",
        house_number: document.getElementById("house_number")?.value.trim() || "",
        floor: document.getElementById("floor")?.value.trim() || "",
        apartment: document.getElementById("apartment")?.value.trim() || "",
        building: building,
        gate_code: document.getElementById("gate_code")?.value.trim() || "",
        notes: document.getElementById("notes")?.value.trim() || "",
        total_price: totalPrice,
        order_days: orderDays
      };
    };

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–∫–∞–∑: —Å–Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–∫–∞–∑, –∑–∞—Ç–µ–º —Å–æ–∑–¥–∞—ë–º —Å–µ—Å—Å–∏—é –æ–ø–ª–∞—Ç—ã
    sendOrder = () => {
      const requestData = this.getOrderDetails();
      if (!requestData) return;
      return this.postData('/payments/process_order_do_wyboru.php', requestData)
        .then(result => {
          if (result.status === 'success') {
            if (result.new_csrf_token) {
              this.updateCsrfToken(result.new_csrf_token);
            }
            const updatedToken = this.getCsrfToken();
            const paymentData = {
              order_id: result.order_id,
              total_price: requestData.total_price,
              email: requestData.email,
              csrf_token: updatedToken
            };
            return this.postData('/payments/payment_summary_do_wyboru.php', paymentData);
          } else {
            throw new Error(result.message);
          }
        })
        .then(paymentResult => {
          if (paymentResult.status === 'success' && paymentResult.id) {
            stripe.redirectToCheckout({ sessionId: paymentResult.id });
          } else {
            throw new Error(paymentResult.message || '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ –æ–ø–ª–∞—Ç—ã');
          }
        })
        .catch(error => {
          alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: " + error.message);
        });
    };

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST-–∑–∞–ø—Ä–æ—Å —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON (—Å –ø–µ—Ä–µ–¥–∞—á–µ–π cookies)
    postData = (url, data) => {
      return fetch(url, {
        method: 'POST',
        credentials: 'same-origin',
        headers: {
          'Content-Type': 'application/json',
          'X-Requested-With': 'XMLHttpRequest'
        },
        body: JSON.stringify(data)
      })
      .then(response => {
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json();
      });
    };
  }

  new App();
</script>




<!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ structured data (schema) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FoodEstablishment",
  "name": "FoodCase Catering",
  "description": "FoodCase Catering - najlepsze zdrowe posi≈Çki na imprezy, spotkania i dostawy do dom√≥w w Krakowie i ca≈Çej Polsce.",
  "image": "https://foodcasecatering.net/assets/img/logo-w.png",
  "address": {
    "@type": "PostalAddress",
    // "streetAddress": "ul. Warszawska 123",
    "addressLocality": "Krak√≥w",
    "postalCode": "31-000",
    "addressCountry": "PL"
  },
  "telephone": "+48 123 456 789",
  "servesCuisine": "Zdrowe posi≈Çki, Catering dietetyczny",
  "url": "https://foodcasecatering.net",
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": 50.0646501,
    "longitude": 19.9449799
  },
  "priceRange": "$$"
}
</script>

<template id="menu-widget-template">
<div class="pay-widget">
    <div class="pay-widget__remove remove-package">
      Usu≈Ñ ten pakiet
      <span>
        <!-- SVG –∏–∫–æ–Ω–∫–∞ -->
        <svg width="12" height="15" viewBox="0 0 12 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M11.5584 5.31135L9.57664 4.5823L10.3975 2.82228C10.5487 2.49825 10.3754 2.1268 10.0106 1.99256L4.72575 0.0485014C4.36094 -0.0856999 3.94265 0.0681447 3.79154 0.392175L2.97064 2.1522L0.988868 1.42315C0.624013 1.28895 0.205769 1.4428 0.0546121 1.76683C-0.0964972 2.09086 0.0767303 2.4623 0.441585 2.59655L3.084 3.5686L7.69011 5.263H1.70985C1.31497 5.263 0.994827 5.54732 0.994827 5.89802V14.365C0.994827 14.7157 1.31497 15 1.70985 15H10.2902C10.6851 15 11.0052 14.7157 11.0052 14.365V6.48254L11.0112 6.48474C11.1007 6.51764 11.1933 6.53326 11.2845 6.53326C11.5651 6.53326 11.8314 6.38564 11.9454 6.14107C12.0965 5.81704 11.9233 5.44555 11.5584 5.31135Z" fill="white"/>
        </svg>
      </span>
    </div>
              <div class="pay-widget__main">
                <div class="pay-widget__row">
                  <div class="pay-widget__title">Menu do wyboru:</div>
                  <section class="kalendarz">
                        <div class="calendar-container">
                            <div class="select-date">Wybierz datƒô:</div>
                            
                            <div id="delivery-calendar"></div>
                            <input type="hidden" id="selected-date" name="selected-date" value="">
                        </div>
                    </section>

                    
                       <div class="pay-widget__row hidden second">
                      <div class="pay-widget__heading-row">
                        <div class="pay-widget__heading">Wybrane Menu:</div>
                        <!-- –ù–æ–≤–∞—è –Ω–∞–¥–ø–∏—Å—å –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ -->
                        
                      </div>
                      <!--—ç—Ç–æ –Ω–µ —É–¥–∞–ª—è–π –∫–æ–¥ –±–µ–∑ –Ω–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ -->
                      <div class="pay-widget__inner">
                        <div class="pay-full-card">
                          <div class="pay-full-card__data">
                            <div class="pay-full-card__title"></div>
                            <div class="pay-full-card__list">
                              <div class="pay-full-card__item qn">
                                <b>Ilo≈õƒá opakowa≈Ñ:</b> 
                                <div class="pay-full-card__qn">1</div>
                              </div>
                              <div class="pay-full-card__item">
                                <b>Data:</b>
                                <div class="pay-full-card__dates">nie wybrano</div>
                              </div>
                             
                              
                              
                              <div class="pay-full-card__item full-sniad">
                                <b><strong>≈öniadania:</strong></b>
                                <div  id="hidden-sniad" name="hidden-sniad-menu-item-pay-full-card">
                                  <span></span>
                                  <div id="hidden-sniad-data-weight" name="hidden-sniad-data-weight"><span></span></div>
                                </div>
                              </div>
                              
                              <div class="pay-full-card__item full-obiad">
                                <b><strong>Obiad:</strong></b>
                                <div  id="hidden-obiad" name="hidden-obiad-menu-item-pay-full-card">
                                  <span></span>
                                  <div id="hidden-obiad-data-weight" name="hidden-obiad-data-weight"><span></span></div>
                                </div>
                              </div>
                              
                              <div class="pay-full-card__item full-kolacja">
                                <b><strong>Kolacja:</strong></b>
                                <div id="hidden-kolacja" name="hidden-kolacja-menu-item-pay-full-card">
                                  <span></span>
                                  <div id="hidden-kolacja-data-weight" name="hidden-kolacja-data-weight"><span></span></div>
                                </div>
                              </div>
                              
                               <div class="pay-full-card__item cost">
                                <b>Cena za pakiet:</b>
                                <div class="price">
                                  <span></span>
                                  <div class="price__old"></div>
                                </div>
                              </div>
                              
                            </div>
                          </div>
                        </div>
                        <div class="pay-widget__aside">
                          <input  class="pay-widget__calendar">
                        </div>
                      </div>
                    </div>


<!--–ö–û–î –¢–û–ß–ù–ï–ï–ï –ë–£–î–ï–¢ –û–¢ –°–Æ–î–ê –î–û 426-->
                  
                  <div class="menu_do_wyboru">



                           
                            
                            <section class="zl_sniad pay-widget__row" data-category="sniad" data-clonable="true">
                                 
                                 <div class="pay-widget__remove remove-category">Usu≈Ñ tƒô ≈öniadania<span>
        <svg width="12" height="15" viewBox="0 0 12 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M11.5584 5.31135L9.57664 4.5823L10.3975 2.82228C10.5487 2.49825 10.3754 2.1268 10.0106 1.99256L4.72575 0.0485014C4.36094 -0.0856999 3.94265 0.0681447 3.79154 0.392175L2.97064 2.1522L0.988868 1.42315C0.624013 1.28895 0.205769 1.4428 0.0546121 1.76683C-0.0964972 2.09086 0.0767303 2.4623 0.441585 2.59655L3.084 3.5686L7.69011 5.263H1.70985C1.31497 5.263 0.994827 5.54732 0.994827 5.89802V14.365C0.994827 14.7157 1.31497 15 1.70985 15H10.2902C10.6851 15 11.0052 14.7157 11.0052 14.365V6.48254L11.0112 6.48474C11.1007 6.51764 11.1933 6.53326 11.2845 6.53326C11.5651 6.53326 11.8314 6.38564 11.9454 6.14107C12.0965 5.81704 11.9233 5.44555 11.5584 5.31135Z" fill="white"/>
        </svg>
      </span>
    </div>
          
                                                    <h2 class="pay-widget__heading">≈öniadania</h2>
                                                                            <input type="hidden" id="hidden-sniad-data-price" name="hidden-sniad-data-price" value="" data-reset="true">
                                                                            <input type="hidden" id="hidden-sniad-data-weight" name="hidden-sniad-data-weight" value="" data-reset="true">
                                                                            <input type="hidden" id="hidden-sniad" name="hidden-sniad-menu-item-pay-full-card" value="" data-reset="true">
                                                                            <input type="hidden" class="selected-menu-options-id" name="selected_sniad_menu_options_id" value="">
                                                                            
                                                                            
                                                            <div class="zl_sniad-zl">
                                                                <div class="select-weight">Zwa≈º wagƒô</div>
                                                                <div class="waga_sniad">
                                                                    <?php if (!empty($groupedData['Sniadanie'])): ?>
                                                                        <?php foreach ($groupedData['Sniadanie'] as $price): ?>
                                                                            <div class="waga-button_sniad pay-item__btn " 
                                                                                    data-weight="<?= htmlspecialchars($price['weight']) ?>" 
                                                                                    data-price="<?= htmlspecialchars($price['price']) ?>"
                                                                                    data-reset="true">
                                                                                <?= htmlspecialchars($price['weight']) ?>g - <?= htmlspecialchars($price['price']) ?> z≈Ç
                                                                            </div>
                                                                        <?php endforeach; ?>
                                                                    <?php else: ?>
                                                                        <div>Nie znaleziono —Ü–µ–Ω dla ≈öniadanie.</div>
                                                                    <?php endif; ?>
                                                                </div>
                                                            </div>
                                                            <div class="pay-wInfo">Wybierz ≈õniadanie:</div> 
                                                            <div class="menu-items_sniad pay-widget__grid menu__grid ">
                                                                <?php if (!empty($menuItemsSniadanie)): ?>
                                                                    <?php $firstFourSniadanie = getFirstFourMenuItems($menuItemsSniadanie); ?>
                                                                    <?php foreach ($firstFourSniadanie as $item): ?>
                                                                        <div class="menu-item pay-full-card" data-menu-options-id="<?= htmlspecialchars($item['menu_options_id'], ENT_QUOTES, 'UTF-8') ?>">
                                                                            
                                                                           <div class="menu-card__photo"> <img  src="<?= htmlspecialchars($item['dish_image']); ?>" alt="<?= htmlspecialchars($item['dish_name']); ?>"></div>
                                    
                                                                            <div class="pay-full-card__data menu-card__data">
                                                                                <div class="menu-card__heading"><h6 ><?= htmlspecialchars($item['dish_name']); ?></h6></div>
                                                                                
                                                                                <div class="menu-card__row" ><div class="menu-card__title">–û–ø–∏—Å–∞–Ω–∏–µ:</div><div class="menu-card__text">
                                                                                    <?= htmlspecialchars($item['dish_description']); ?></div></div>
                                                                                <div class="menu-card__row" ><div class="menu-card__title">–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:</div><div class="menu-card__text"><?= htmlspecialchars($item['dish_ingredients']); ?></div></div>
                                                                                <div class="menu-card__row" ><div class="menu-card__title">–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:</div><div class="menu-card__text"><?= htmlspecialchars($item['dish_ingredients']); ?></div></div>
                                                                            </div>
                                                                        </div>
                                                                    <?php endforeach; ?>
                                                                <?php else: ?>
                                                                    <p>–î–∞–Ω–Ω—ã—Ö –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "≈öniadania" –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
                                                                <?php endif; ?>
                                                                <div class="add-food">
                                                            <div class="add-food_sniad" data-add-category="sniad">
                                                                Dodaj dodatkowe ≈õniadanie
                                                            </div>
                                                            </div>
                                                        </div>
                                                        
                                        </section>
 
                            <section class="zl_obiad pay-widget__row" data-category="obiad" data-clonable="true">
                                 
                                      <div class="pay-widget__remove remove-category">Usu≈Ñ tƒô Obiad<span>
        <svg width="12" height="15" viewBox="0 0 12 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M11.5584 5.31135L9.57664 4.5823L10.3975 2.82228C10.5487 2.49825 10.3754 2.1268 10.0106 1.99256L4.72575 0.0485014C4.36094 -0.0856999 3.94265 0.0681447 3.79154 0.392175L2.97064 2.1522L0.988868 1.42315C0.624013 1.28895 0.205769 1.4428 0.0546121 1.76683C-0.0964972 2.09086 0.0767303 2.4623 0.441585 2.59655L3.084 3.5686L7.69011 5.263H1.70985C1.31497 5.263 0.994827 5.54732 0.994827 5.89802V14.365C0.994827 14.7157 1.31497 15 1.70985 15H10.2902C10.6851 15 11.0052 14.7157 11.0052 14.365V6.48254L11.0112 6.48474C11.1007 6.51764 11.1933 6.53326 11.2845 6.53326C11.5651 6.53326 11.8314 6.38564 11.9454 6.14107C12.0965 5.81704 11.9233 5.44555 11.5584 5.31135Z" fill="white"/>
        </svg>
      </span>
    </div>
          
                                <h2 class="pay-widget__heading">Obiad</h2>
                                <input type="hidden" id="hidden-obiad-data-price" name="hidden-obiad-data-price" value="" data-reset="true">
                                <input type="hidden" id="hidden-obiad-data-weight" name="hidden-obiad-data-weight" value="" data-reset="true">
                                <input type="hidden" id="hidden-obiad" name="hidden-obiad-menu-item-pay-full-card" value="" data-reset="true">
                                <input type="hidden" class="selected-menu-options-id" name="selected_obiad_menu_options_id" value="">
                                <div class="zl_obiad-zl">
                                    <div class="select-weight">Zwa≈º wagƒô</div>
                                    <div class="waga_obiad">
                                        <?php if (!empty($groupedData['Obiad'])): ?>
                                            <?php foreach ($groupedData['Obiad'] as $price): ?>
                                                <a class="waga-button_obiad pay-item__btn" 
                                                        data-weight="<?= htmlspecialchars($price['weight']) ?>" 
                                                        data-price="<?= htmlspecialchars($price['price']) ?>"
                                                        data-reset="true">
                                                    <?= htmlspecialchars($price['weight']) ?>g - <?= htmlspecialchars($price['price']) ?> z≈Ç
                                                </a>
                                            <?php endforeach; ?>
                                        <?php else: ?>
                                            <div>Nie znaleziono —Ü–µ–Ω –¥–ª—è Obiad.</div>
                                        <?php endif; ?>
                                    </div>
                                </div>
                                <div class="pay-wInfo">Wybierz Obiad:</div> 
                                <div class="menu-items_obiad pay-widget__grid menu__grid">
                                    <?php if (!empty($menuItemsObiad)): ?>
                                        <?php foreach ($menuItemsObiad as $item): ?>
                                            <div class="menu-item pay-full-card" data-menu-options-id="<?= htmlspecialchars($item['menu_options_id'], ENT_QUOTES, 'UTF-8') ?>">
                                                
                                               <div class=" menu-card__photo"> <img  src="<?= htmlspecialchars($item['dish_image']); ?>" alt="<?= htmlspecialchars($item['dish_name']); ?>"> </div>
                                                
                                                
                                                <div class="pay-full-card__data menu-card__data">
                                                    <div class="menu-card__heading"><h6 ><?= htmlspecialchars($item['dish_name']); ?></h6></div>
                                                    <div class="menu-card__row"><div class="menu-card__title">–û–ø–∏—Å–∞–Ω–∏–µ:</div><div class="menu-card__text"><?= htmlspecialchars($item['dish_description']); ?></div></div>
                                                    <div class="menu-card__row"><div class="menu-card__title">–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:</div><div class="menu-card__text"><?= htmlspecialchars($item['dish_ingredients']); ?></div></div>
                                                </div>
                                            </div>
                                        <?php endforeach; ?>
                                    <?php else: ?>
                                        <p>–î–∞–Ω–Ω—ã—Ö –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "Obiad" –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
                                    <?php endif; ?>
                                    <div class="add-food">
                                     <div class="add-food_obiad" data-add-category="obiad">
                                        Dodaj dodatkowe Obiad
                                    </div>
                                    </div>
                                </div>
                                
                </section>

                            <section class="zl_kolacja pay-widget__row" data-category="kolacja" data-clonable="true">
                                
                                <div class="pay-widget__remove remove-category">Usu≈Ñ tƒô Kolacja<span>
        <svg width="12" height="15" viewBox="0 0 12 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M11.5584 5.31135L9.57664 4.5823L10.3975 2.82228C10.5487 2.49825 10.3754 2.1268 10.0106 1.99256L4.72575 0.0485014C4.36094 -0.0856999 3.94265 0.0681447 3.79154 0.392175L2.97064 2.1522L0.988868 1.42315C0.624013 1.28895 0.205769 1.4428 0.0546121 1.76683C-0.0964972 2.09086 0.0767303 2.4623 0.441585 2.59655L3.084 3.5686L7.69011 5.263H1.70985C1.31497 5.263 0.994827 5.54732 0.994827 5.89802V14.365C0.994827 14.7157 1.31497 15 1.70985 15H10.2902C10.6851 15 11.0052 14.7157 11.0052 14.365V6.48254L11.0112 6.48474C11.1007 6.51764 11.1933 6.53326 11.2845 6.53326C11.5651 6.53326 11.8314 6.38564 11.9454 6.14107C12.0965 5.81704 11.9233 5.44555 11.5584 5.31135Z" fill="white"/>
        </svg>
      </span>
    </div>
                                <h2 class="pay-widget__heading">Kolacja</h2>
                                 <input type="hidden" id="hidden-kolacja-data-price" name="hidden-kolacja-data-price" value="" data-reset="true">
                                    <input type="hidden" id="hidden-kolacja-data-weight" name="hidden-kolacja-data-weight" value="" data-reset="true">
                                    <input type="hidden" id="hidden-kolacja" name="hidden-kolacja-menu-item-pay-full-card" value="" data-reset="true">
                                    <input type="hidden" class="selected-menu-options-id" name="selected_kolacja_menu_options_id" value="">
                                    
                                <div class="zl_kolacja-zl">
                                    <div class="select-weight">Zwa≈º wagƒô</div>
                                    <div class="waga_kolacja">
                                        <?php if (!empty($groupedData['Kolacja'])): ?>
                                            <?php foreach ($groupedData['Kolacja'] as $price): ?>
                                                <a class="waga-button_kolacja pay-item__btn" 
                                                        data-weight="<?= htmlspecialchars($price['weight']) ?>" 
                                                        data-price="<?= htmlspecialchars($price['price']) ?>"
                                                        data-reset="true">
                                                    <?= htmlspecialchars($price['weight']) ?>g - <?= htmlspecialchars($price['price']) ?> z≈Ç
                                                </a>
                                            <?php endforeach; ?>
                                        <?php else: ?>
                                            <div>Nie znalezion–æ —Ü–µ–Ω –¥–ª—è Kolacja.</div>
                                        <?php endif; ?>
                                    </div>
                                </div>
                                <div class="pay-wInfo">Wybierz Kolacja:</div>
                                <div class="menu-items_kolacja pay-widget__grid menu__grid ">
                                    <?php if (!empty($menuItemsKolacja)): ?>
                                        <?php foreach ($menuItemsKolacja as $item): ?>
                                            <div class="menu-item pay-full-card" data-menu-options-id="<?= htmlspecialchars($item['menu_options_id'], ENT_QUOTES, 'UTF-8') ?>">
                                                <div class=" menu-card__photo"><img  src="<?= htmlspecialchars($item['dish_image']); ?>" alt="<?= htmlspecialchars($item['dish_name']); ?>"></div>
                                                
                                                <div class="pay-full-card__data menu-card__data">
                                                    <div class="menu-card__heading"><h6 ><?= htmlspecialchars($item['dish_name']); ?></h6></div>
                                                    <div class="menu-card__row"><div class="menu-card__title">–û–ø–∏—Å–∞–Ω–∏–µ:</div><div class="menu-card__text"><?= htmlspecialchars($item['dish_description']); ?></div></div>
                                                    <div class="menu-card__row"><div class="menu-card__title">–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:</div><div class="menu-card__text"><?= htmlspecialchars($item['dish_ingredients']); ?></div></div>
                                                </div>
                                            </div>
                                        <?php endforeach; ?>
                                    <?php else: ?>
                                        <p>–î–∞–Ω–Ω—ã—Ö –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "Kolacja" –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
                                    <?php endif; ?>
                                    <div class="add-food">
                                     <div class="add-food_kolacja" data-add-category="kolacja">
                                        Dodaj dodatkowe Kolacja
                                    </div>
                                    </div>
                                    </div>
                                </div>
                                 
                        </section>
                       </section>


     
      <!--–î–û –°–Æ–î–ê –í–°–¢–ê–í–ö–ê –ö–û–î–ê -->
                        </div>
                <!-- –†–∞–∑–¥–µ–ª —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏ -->
                    <div class="pay-widget__row hidden second">
                      <div class="pay-widget__heading-row">
                        <div class="pay-widget__heading">Wybrane Menu:</div>

                      </div>
                      <!--—ç—Ç–æ –Ω–µ —É–¥–∞–ª—è–π –∫–æ–¥ –±–µ–∑ –Ω–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ -->
                      
                    </div>

                
              </div>
            </div>
</template>

<div id="error-message" style="
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: #f8d7da;
  color: #721c24;
  padding: 10px 20px;
  border: 1px solid blue;
  border-radius: 5px;
  z-index: 1000;">
</div>



</body>
</html>
 